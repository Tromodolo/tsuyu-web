(this["webpackJsonptsuyu-web"]=this["webpackJsonptsuyu-web"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(1),a=n.n(s),c=n(60),i=n.n(c),o=(n(71),n(24)),u=n(6),l=n(2),d=n(61),b=n(9),j=(n(91),n(39)),h=n.n(j),f=function(e){var t="button";return e.small&&(t+=" button-small"),e.transparent&&(t+=" button-transparent"),Object(r.jsx)("button",{className:"".concat(t," ").concat(e.className),type:e.type,onClick:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},disabled:e.isLoading,children:e.isLoading?Object(r.jsx)(h.a,{color:"#000000",size:8}):e.text})},p=(n(95),function(e){return Object(r.jsxs)("div",{style:{width:"100%"},children:[e.label&&Object(r.jsx)("label",{className:"input-label",htmlFor:e.id,children:e.label}),Object(r.jsx)("input",{className:"text-input",id:e.id,type:e.type,placeholder:e.placeholder,onChange:function(t){return e.onChange?e.onChange(t.target.value):null},disabled:e.disabled})]})}),O=(n(96),function(e){var t=Object(s.useState)(""),n=Object(l.a)(t,2),a=n[0],c=n[1],i=Object(s.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],j=Object(s.useState)(""),h=Object(l.a)(j,2),O=h[0],v=h[1],g=Object(s.useState)("login"),m=Object(l.a)(g,2),x=m[0],w=m[1],y=0,N=0;if(e.anchorElement){var S=window.innerWidth,k=e.anchorElement.getBoundingClientRect();y=S-k.right+20,N=k.bottom+20}return Object(r.jsxs)("form",{className:"login-popup",style:{right:y,top:N},onSubmit:function(t){e.isLoading||(null===t||void 0===t||t.preventDefault(),"login"===x?b.userService.login({username:a,password:u}):b.userService.register({username:a,password:u,email:O}))},children:[Object(r.jsx)("div",{className:"popup-arrow"}),Object(r.jsx)("label",{className:"login-error",children:e.error}),Object(r.jsx)(p,{id:"username",placeholder:"Username",onChange:function(e){return c(e)}}),Object(r.jsx)(p,{id:"password",placeholder:"Password",type:"password",onChange:function(e){return d(e)}}),"register"===x?Object(r.jsx)(p,{id:"email",placeholder:"Email",type:"email",onChange:function(e){return v(e)}}):null,Object(r.jsxs)("div",{className:"login-buttons",children:[e.showRegister&&"login"===x&&Object(r.jsx)(f,{type:"button",onClick:function(){return w("register")},small:!0,transparent:!0,text:"Create account"}),e.showRegister&&"register"===x&&Object(r.jsx)(f,{type:"button",onClick:function(){return w("login")},small:!0,transparent:!0,text:"Already have an account?"}),Object(r.jsx)(f,{text:"login"===x?"Log In":"Register",isLoading:e.isLoading})]})]})}),v=(n(97),function(e){var t=Object(b.useAuthenticationState)(),n=t.isLoggedIn,a=t.error,c=t.isLoading,i=Object(d.useSettings)().register_enabled,u=Object(s.useRef)(),j=Object(s.useState)(!1),h=Object(l.a)(j,2),f=h[0],p=h[1];return Object(s.useEffect)((function(){p(!1)}),[n]),Object(r.jsxs)("nav",{className:"nav-bar",children:[Object(r.jsx)("section",{className:"nav-start",children:Object(r.jsx)("h3",{className:"name",children:"tsuyu"})}),Object(r.jsxs)("section",{className:"nav-end",children:[Object(r.jsx)(o.b,{to:"",className:"home"===e.activePage?"nav-item active":"nav-item",children:"Home"}),Object(r.jsx)(o.b,{to:"contact",className:"contact"===e.activePage?"nav-item active":"nav-item",children:"Contact"}),n?Object(r.jsx)(o.b,{to:"dashboard",className:"dashboard"===e.activePage?"nav-item active":"nav-item",children:"Dashboard"}):Object(r.jsx)("button",{className:"nav-item",onClick:function(){return p(!f)},ref:function(e){return u.current=e},children:"Log in"})]}),f?Object(r.jsx)(O,{anchorElement:u.current,showRegister:i,error:a,isLoading:c}):null]})}),g=(n(103),function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("section",{className:"route",id:"contact",children:Object(r.jsxs)("section",{className:"contact",children:[Object(r.jsx)("h1",{className:"contact-title",children:"Contact"}),Object(r.jsxs)("p",{className:"contact-info",children:["For legal notices or takedown requests, please go contact me via ",Object(r.jsx)("a",{href:"mailto:filip.ekstrom98@gmail.com",className:"link",children:"email."})]}),Object(r.jsxs)("p",{className:"contact-info",children:["For other questions and answers, be sure to contact me either via ",Object(r.jsx)("a",{href:"mailto:filip.ekstrom98@gmail.com",className:"link",children:"email"})," or by joining my ",Object(r.jsx)("a",{href:"https://discord.gg/PhswpNNYTM",className:"link",children:"Discord Server."})]})]})})})}),m=n(42),x=(n(104),n(26)),w=n(133),y=n(18),N=n(64),S=function(){var e=Object(u.f)(),t=Object(s.useState)("files"),n=Object(l.a)(t,2),a=n[0],c=n[1],i=Object(x.useFileState)(),o=i.currentPage,d=i.totalPages,j=i.files,h=i.isLoading,O=Object(b.useAuthenticationState)(),v=O.user,g=O.error,S=Object(s.useState)(""),k=Object(l.a)(S,2),P=k[0],L=k[1],E=Object(s.useState)(""),C=Object(l.a)(E,2),F=C[0],$=C[1],_=function(){b.userService.changePassword({password:P,new_password:F})};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("section",{className:"route",id:"dashboard",children:[Object(r.jsxs)("nav",{className:"dashboard-menu",children:[Object(r.jsx)("button",{className:"menu-item",onClick:function(){return c("files")},children:"Files"}),Object(r.jsx)("button",{className:"menu-item",onClick:function(){return c("account")},children:"Account"}),Object(r.jsx)("button",{className:"menu-item",onClick:function(){b.userService.logout(),e.push("home"),console.info("Logged out")},children:"Log Out"})]}),Object(r.jsx)("section",{className:"dashboard-content",children:function(){var e;switch(a){case"files":return Object(r.jsx)("section",{className:"dashboard-files",children:h?Object(r.jsx)("div",{className:"loading",children:Object(r.jsx)(N.BounceLoader,{color:"#44E384"})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("section",{className:"file-table",children:[Object(r.jsxs)("div",{className:"table-header",children:[Object(r.jsx)("span",{className:"header-name",children:"Original file name"}),Object(r.jsx)("span",{className:"header-size",children:"Size"}),Object(r.jsx)("span",{className:"header-date",children:"Date uploaded"}),Object(r.jsx)("span",{className:"header-link",children:"Link"})]}),Object(r.jsx)("div",{className:"table-content",children:j.map((function(e){return Object(r.jsxs)("div",{className:"table-row",children:[Object(r.jsx)("div",{className:"row-name",children:e.original_name}),Object(r.jsx)("div",{className:"row-size",children:Object(r.jsx)("span",{children:e.file_size>1e3?"".concat((e.file_size/1e3).toFixed(2)," MB"):"".concat(e.file_size," KB")})}),Object(r.jsx)("div",{className:"row-date",children:Object(r.jsx)("span",{children:Object(w.a)(new Date(e.created_at),"dd MMM HH:mm aaa")})}),Object(r.jsx)(f,{className:"row-link",small:!0,transparent:!0,text:"Copy",onClick:function(){return t=e,void navigator.clipboard.writeText("".concat(y.a,"/").concat(t.name));var t}})]},e.id)}))})]}),Object(r.jsxs)("div",{className:"table-nav",children:[Object(r.jsx)("button",{className:o<=1?"disabled":"",disabled:o<=1,onClick:function(){return x.fileService.getPreviousPage()},children:Object(r.jsx)(m.a,{color:o<=1?"#5B5C5E":"#DAE1E7",size:18})}),"Page ",o,"/",d,Object(r.jsx)("button",{className:o>=d?"disabled":"",disabled:o>=d,onClick:function(){return x.fileService.getNextPage()},children:Object(r.jsx)(m.b,{color:o>=d?"#5B5C5E":"#DAE1E7",size:18})})]})]})});case"account":return Object(r.jsxs)("section",{className:"dashboard-account",children:[Object(r.jsx)(p,{disabled:!0,id:"username",placeholder:null===v||void 0===v?void 0:v.username,label:"Username"}),Object(r.jsx)(p,{disabled:!0,id:"email",placeholder:null!==(e=null===v||void 0===v?void 0:v.email)&&void 0!==e?e:"",label:"Email"}),Object(r.jsxs)("div",{className:"token-input",children:[Object(r.jsx)(p,{disabled:!0,id:"token",placeholder:null===v||void 0===v?void 0:v.api_key,label:"Api Token"}),Object(r.jsx)(f,{text:"Copy",className:"token-copy",onClick:function(){return function(){var e;navigator.clipboard.writeText(null!==(e=null===v||void 0===v?void 0:v.api_key)&&void 0!==e?e:"")}()}})]}),Object(r.jsxs)("form",{className:"password-update",onSubmit:function(){return _()},children:[Object(r.jsx)("label",{className:"password-update-error",children:g}),Object(r.jsx)("label",{className:"password-update-success",children:null===v||void 0===v?void 0:v.message}),Object(r.jsx)(p,{id:"oldpass",label:"Old password",type:"password",onChange:function(e){return L(e)}}),Object(r.jsx)(p,{id:"newpass",label:"New Password",type:"password",onChange:function(e){return $(e)}}),Object(r.jsx)(f,{text:"Update password",type:"button",onClick:function(){return _()}})]})]})}}()})]})})},k=n(36),P=n(19),L=(n(127),function(e){var t;return Object(r.jsxs)("div",{className:"upload-button-wrapper",children:[Object(r.jsx)("input",{type:"file",id:"upload-button",name:"files",style:{display:"none"},onChange:function(t){var n,r;return null===(n=e.onUpload)||void 0===n?void 0:n.call(e,null===(r=t.target.files)||void 0===r?void 0:r[0])},multiple:!1,disabled:0!==e.percentage}),Object(r.jsx)("label",Object(P.a)(Object(P.a)({htmlFor:"upload-button",id:"upload-label",className:"upload-label"},{progress:"50px"}),{},{children:"Click or drag file to upload"})),Object(r.jsx)("div",{className:"upload-progress",style:{width:"".concat(null!==(t=e.percentage)&&void 0!==t?t:0,"%")}})]})}),E=n(65),C=n.n(E),F=(n(128),{Version:"1.0",Name:"tsuyu",DestinationType:"ImageUploader, TextUploader, FileUploader",RequestMethod:"POST",RequestURL:"".concat("https://u.tro.moe","/upload"),Headers:{Authorization:"REPLACE_THIS"},Body:"MultipartFormData",FileFormName:"file",URL:"$response$"}),$=function(){var e=Object(b.useAuthenticationState)(),t=e.isLoggedIn,n=e.user,s=Object(x.useFileState)(),a=s.recentlyUploaded,c=s.uploadProgress,i=function(){var e,t=Object(P.a)({},F);(null===n||void 0===n?void 0:n.api_key)&&(t.Headers.Authorization=null!==(e=null===n||void 0===n?void 0:n.api_key)&&void 0!==e?e:"");var r=new Blob([JSON.stringify(t,null,2)],{type:"application/json"});C()(r,"tsuyu.sxcu","application/json")},o=function(e){e&&x.fileService.uploadFile(e)};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("section",{className:"route",id:"home",children:[Object(r.jsxs)("section",{className:"info",children:[Object(r.jsx)("h1",{className:"title",children:"tsuyu"}),Object(r.jsx)("h3",{className:"subtitle",children:"\u30c4\u30e6"}),Object(r.jsx)("p",{className:"description",children:"File uploading service lovingly crafted using Rust."})]}),Object(r.jsx)("section",{className:"interactions",children:t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(L,{onUpload:o,percentage:c}),(null===a||void 0===a?void 0:a.length)>0&&Object(r.jsx)("h4",{children:"Uploaded files (Last 3)"}),Object(k.a)(a).reverse().slice(0,3).map((function(e){return Object(r.jsxs)("div",{className:"recent-file",children:[Object(r.jsx)(f,{text:"Copy URL",onClick:function(){return function(e){navigator.clipboard.writeText(e)}(e)},small:!0}),Object(r.jsx)("span",{children:e.split("".concat(window.location.host,"/"))[1]})]},e)})),Object(r.jsxs)("div",{className:"interaction-buttons",children:[Object(r.jsx)(f,{text:"Github",className:"button-github",onClick:function(){return window.location.href="https://github.com/tromodolo/tsuyu"}}),Object(r.jsx)(f,{text:"ShareX config",className:"button-sharex",onClick:function(){return i()}})]})]}):Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"interaction-buttons wide",children:[Object(r.jsx)(f,{text:"Github",className:"button-github",onClick:function(){return window.location.href="https://github.com/tromodolo/tsuyu"}}),Object(r.jsx)(f,{text:"ShareX config",className:"button-sharex",onClick:function(){return i()}})]})})}),Object(r.jsx)("a",{className:"credits",href:"https://www.pixiv.net/en/artworks/71865345",children:"Art source: Hang"})]})})},_=function(){var e=Object(b.useAuthenticationState)().isLoggedIn;return Object(r.jsx)(o.a,{children:Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{path:"/contact",children:Object(r.jsxs)("main",{className:"content",children:[Object(r.jsx)(v,{activePage:"contact"}),Object(r.jsx)(g,{})]})}),e?Object(r.jsx)(u.a,{path:"/dashboard",children:Object(r.jsxs)("main",{className:"content",children:[Object(r.jsx)(v,{activePage:"dashboard"}),Object(r.jsx)(S,{})]})}):null,Object(r.jsx)(u.a,{path:"/",children:Object(r.jsxs)("main",{className:"content",children:[Object(r.jsx)(v,{activePage:"home"}),Object(r.jsx)($,{})]})})]})})},A=n(10);Object(A.d)({include:["user"]});var U=function(){return Object(r.jsx)(_,{})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,134)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(U,{})}),document.getElementById("root")),T()},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var r=n(5),s=n.n(r),a=n(62),c=n(13),i=n(35),o=n.n(i),u=n(9),l="https://u.tro.moe",d="";function b(e,t,n,r){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(s.a.mark((function e(t,n,r,c){var i,u,b,j,h,f,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i="".concat(l,"/").concat(t),void 0!==c){u=Object(a.a)(c);try{for(u.s();!(b=u.n()).done;)j=b.value,i+="/".concat(j)}catch(s){u.e(s)}finally{u.f()}}return e.prev=2,e.next=5,o()({method:n,url:i,data:r,headers:{"Content-Type":"application/json",Authorization:null!==(f=d)&&void 0!==f?f:""}});case 5:h=e.sent,e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(2),!(p=e.t0).response){e.next=15;break}h=p.response,e.next=16;break;case 15:throw new Error("Request failed");case 16:if(200!==h.status){e.next=20;break}return e.abrupt("return",{status:200,json:h.data});case 20:return e.abrupt("return",{status:h.status,json:h.data,error:h.data});case 21:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}u.userQuery.api_key.subscribe((function(e){d=e}))},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),s=n(16),a=n(15),c=n(10),i=n(28),o=new(function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).store=e,s.files$=s.select((function(e){return e.files})),s.recentlyUploaded$=s.select((function(e){return e.recentlyUploaded})),s.uploadProgress$=s.select((function(e){return e.uploadProgress})),s.currentPage$=s.select((function(e){return e.currentPage})),s.totalPages$=s.select((function(e){return e.totalPages})),s.isLoading$=s.selectLoading(),s.error$=s.selectError(),s}return n}(c.a))(i.a)},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,s=n(8),a=n(16),c=n(15),i=n(10),o=new(Object(i.c)({name:"user",idKey:"_id"})(r=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.call(this,{})}return n}(i.b))||r)},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),s=n(16),a=n(15),c=n(10),i=n(27),o=new(function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).store=e,s.maxFileSizeBytes$=s.select((function(e){return e.max_file_size_bytes})),s.registerEnabled$=s.select((function(e){return e.register_enabled})),s.isLoading$=s.selectLoading(),s.error$=s.selectError(),s}return n}(c.a))(i.a)},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),s=n(16),a=n(15),c=n(10),i=n(21),o=new(function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).store=e,s.user$=s.select(),s.isLoggedIn$=s.select((function(e){return!!e.api_key})),s.api_key=s.select((function(e){return e.api_key})),s.isLoading$=s.selectLoading(),s.error$=s.selectError(),s}return n}(c.a))(i.a)},26:function(e,t,n){"use strict";var r=n(58);n.o(r,"fileService")&&n.d(t,"fileService",(function(){return r.fileService})),n.o(r,"useFileState")&&n.d(t,"useFileState",(function(){return r.useFileState}));n(20);var s=n(34);n.d(t,"fileService",(function(){return s.a}));var a=n(59);n.d(t,"useFileState",(function(){return a.a}));n(28)},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,s=n(8),a=n(16),c=n(15),i=n(10),o=new(Object(i.c)({name:"settings",idKey:"_id"})(r=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.call(this,{})}return n}(i.b))||r)},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,s=n(8),a=n(16),c=n(15),i=n(10),o=new(Object(i.c)({name:"files",idKey:"_id"})(r=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.call(this,{currentPage:1,totalPages:1,files:[]})}return n}(i.b))||r)},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(5),s=n.n(r),a=n(19),c=n(13),i=n(8),o=n(30),u=n(18),l=n(27),d=new(function(){function e(t){Object(i.a)(this,e),this.store=t}return Object(o.a)(e,[{key:"fetchSettings",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),e.next=4,Object(u.b)("settings","GET");case 4:200===(t=e.sent).status?this.store.update(Object(a.a)({},t.json)):this.store.setError("Invalid username or password."),this.store.setLoading(!1);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}())(l.a)},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(36),s=n(5),a=n.n(s),c=n(13),i=n(8),o=n(30),u=n(28),l=n(18),d=n(35),b=n.n(d),j=n(21),h=new(function(){function e(t,n){Object(i.a)(this,e),this.store=t,this.userStore=n}return Object(o.a)(e,[{key:"getFiles",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),t=this.store.getValue(),e.prev=3,e.next=6,Object(l.b)("file/list","GET",void 0,[t.currentPage.toString()]);case 6:200===(n=e.sent).status?this.store.update({files:n.json}):this.store.setError(n.error),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.store.setError(e.t0.message);case 13:this.store.setLoading(!1);case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNextPage",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.store.getValue()).currentPage>=t.totalPages)){e.next=3;break}return e.abrupt("return");case 3:return this.store.update({currentPage:t.currentPage+1}),e.next=6,this.getFiles();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPreviousPage",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.store.getValue()).currentPage<=1)){e.next=3;break}return e.abrupt("return");case 3:return this.store.update({currentPage:t.currentPage-1}),e.next=6,this.getFiles();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadFile",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var n,s,c,i,o,u,d=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),n=this.userStore.getValue(),s=this.store.getValue(),e.prev=4,e.prev=5,(i=new FormData).append("file",t),e.next=10,b.a.post("".concat(l.a,"/file/upload"),i,{headers:{"Content-Type":"multipart/form-data",Authorization:n.api_key},onUploadProgress:function(e){var t=Math.round(e.loaded/e.total*100);d.store.update({uploadProgress:t})}});case 10:c=e.sent,e.next=21;break;case 13:if(e.prev=13,e.t0=e.catch(5),!(o=e.t0).response){e.next=20;break}c=o.response,e.next=21;break;case 20:throw new Error("Request failed");case 21:200===c.status?this.store.update({uploadProgress:0,recentlyUploaded:[].concat(Object(r.a)(null!==(u=s.recentlyUploaded)&&void 0!==u?u:[]),[c.data])}):this.store.setError(c.data),e.next=27;break;case 24:e.prev=24,e.t1=e.catch(4),this.store.setError(e.t1.message);case 27:this.store.setLoading(!1);case 28:case"end":return e.stop()}}),e,this,[[4,24],[5,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}())(u.a,j.a)},43:function(e,t){},52:function(e,t){},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(5),s=n.n(r),a=n(19),c=n(13),i=n(8),o=n(30),u=n(21),l=n(18),d=new(function(){function e(t){Object(i.a)(this,e),this.store=t}return Object(o.a)(e,[{key:"login",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),this.store.update({message:void 0}),e.prev=3,e.next=6,Object(l.b)("user/login","POST",t);case 6:200===(n=e.sent).status?this.store.update(Object(a.a)({},n.json)):this.store.setError("Invalid username or password."),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.store.setError(e.t0.message);case 13:this.store.setLoading(!1);case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),e.prev=2,e.next=5,Object(l.b)("user/register","POST",t);case 5:200===(n=e.sent).status?this.store.update(Object(a.a)({},n.json)):this.store.setError(n.error),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.store.setError(e.t0.message);case 12:this.store.setLoading(!1);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){this.store.update({id:void 0,username:void 0,email:void 0,api_key:void 0,is_admin:void 0,last_update:void 0,created_at:void 0,message:void 0})}},{key:"changePassword",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),this.store.update({message:void 0}),n=this.store.getValue(),e.prev=4,e.next=7,Object(l.b)("user/change-password","POST",t,[n.id.toString()]);case 7:200===(r=e.sent).status?this.store.update({message:"Successfully updated password"}):this.store.setError(r.error),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.store.setError(e.t0.message);case 14:this.store.setLoading(!1);case 15:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()}]),e}())(u.a)},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),s=n(1),a=n(23),c=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(s.useState)(""),o=Object(r.a)(i,2),u=o[0],l=o[1],d=Object(s.useState)(),b=Object(r.a)(d,2),j=b[0],h=b[1],f=Object(s.useState)(!1),p=Object(r.a)(f,2),O=p[0],v=p[1];return Object(s.useEffect)((function(){var e=[a.a.isLoading$.subscribe((function(e){return c(e)})),a.a.error$.subscribe((function(e){return l(e)})),a.a.user$.subscribe((function(e){return h(e)})),a.a.isLoggedIn$.subscribe((function(e){return v(e)}))];return function(){e.map((function(e){return e.unsubscribe()}))}}),[]),{isLoggedIn:O,user:j,error:u,isLoading:n}}},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),s=n(1),a=n(22),c=n(33),i=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],i=t[1],o=Object(s.useState)(""),u=Object(r.a)(o,2),l=u[0],d=u[1],b=Object(s.useState)(!1),j=Object(r.a)(b,2),h=j[0],f=j[1],p=Object(s.useState)(0),O=Object(r.a)(p,2),v=O[0],g=O[1];return Object(s.useEffect)((function(){c.a.fetchSettings();var e=[a.a.isLoading$.subscribe((function(e){return i(e)})),a.a.error$.subscribe((function(e){return d(e)})),a.a.registerEnabled$.subscribe((function(e){return f(e)})),a.a.maxFileSizeBytes$.subscribe((function(e){return g(e)}))];return function(){e.map((function(e){return e.unsubscribe()}))}}),[]),{register_enabled:h,max_file_size_bytes:v,error:l,isLoading:n}}},58:function(e,t){},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),s=n(1),a=n(9),c=n(20),i=n(34),o=function(){var e=Object(a.useAuthenticationState)().isLoggedIn,t=Object(s.useState)(!1),n=Object(r.a)(t,2),o=n[0],u=n[1],l=Object(s.useState)(""),d=Object(r.a)(l,2),b=d[0],j=d[1],h=Object(s.useState)([]),f=Object(r.a)(h,2),p=f[0],O=f[1],v=Object(s.useState)([]),g=Object(r.a)(v,2),m=g[0],x=g[1],w=Object(s.useState)(0),y=Object(r.a)(w,2),N=y[0],S=y[1],k=Object(s.useState)(1),P=Object(r.a)(k,2),L=P[0],E=P[1],C=Object(s.useState)(1),F=Object(r.a)(C,2),$=F[0],_=F[1];return Object(s.useEffect)((function(){e&&i.a.getFiles();var t=[c.a.isLoading$.subscribe((function(e){return u(e)})),c.a.error$.subscribe((function(e){return j(e)})),c.a.files$.subscribe((function(e){return O(null!==e&&void 0!==e?e:[])})),c.a.recentlyUploaded$.subscribe((function(e){return x(null!==e&&void 0!==e?e:[])})),c.a.uploadProgress$.subscribe((function(e){return S(null!==e&&void 0!==e?e:0)})),c.a.currentPage$.subscribe((function(e){return E(e)})),c.a.totalPages$.subscribe((function(e){return _(e)}))];return function(){t.map((function(e){return e.unsubscribe()}))}}),[e]),{error:b,isLoading:o,files:p,recentlyUploaded:m,uploadProgress:N,currentPage:L,totalPages:$}}},61:function(e,t,n){"use strict";var r=n(43);n.o(r,"useSettings")&&n.d(t,"useSettings",(function(){return r.useSettings}));n(22),n(33);var s=n(55);n.d(t,"useSettings",(function(){return s.a}));n(27)},71:function(e,t,n){},9:function(e,t,n){"use strict";var r=n(52);n.o(r,"useAuthenticationState")&&n.d(t,"useAuthenticationState",(function(){return r.useAuthenticationState})),n.o(r,"userQuery")&&n.d(t,"userQuery",(function(){return r.userQuery})),n.o(r,"userService")&&n.d(t,"userService",(function(){return r.userService}));var s=n(23);n.d(t,"userQuery",(function(){return s.a}));var a=n(53);n.d(t,"userService",(function(){return a.a}));var c=n(54);n.d(t,"useAuthenticationState",(function(){return c.a}));n(21)},91:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){}},[[129,1,2]]]);
//# sourceMappingURL=main.3596a554.chunk.js.map